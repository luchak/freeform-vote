(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{178:function(e,t,n){e.exports=n(616)},183:function(e,t,n){},184:function(e,t,n){},616:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),l=n(176),i=n.n(l),o=(n(183),n(18)),s=(n(184),n(16)),u=n(17),c=n(115),h=n.n(c),d=n(91),v=n(618),m=h.a.mark(f);function f(e,t){var n,a;return h.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=Math.min(e.length,t.length),a=0;case 2:if(!(a<n)){r.next=8;break}return r.next=5,[e[a],t[a]];case 5:++a,r.next=2;break;case 8:case"end":return r.stop()}},m)}function g(e){for(var t=(e=e.slice()).length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[n],e[n]=a}return e}function y(e,t,n){for(var a=new Map,r=0;r<n;++r){var l=new p,i=!0,s=!1,u=void 0;try{for(var c,h=g(e)[Symbol.iterator]();!(i=(c=h.next()).done);i=!0){var d=c.value;l.update(d)}}catch(v){s=!0,u=v}finally{try{i||null==h.return||h.return()}finally{if(s)throw u}}l.accumulateRatings(a)}return function(e,t,n){var a=[],r=!0,l=!1,i=void 0;try{for(var s,u=e.entries()[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value,h=Object(o.a)(c,2),d=h[0],m=h[1],f=m.mu/n+t*Math.sqrt(m.sigma2/n);a.push({id:d,score:f})}}catch(v){l=!0,i=v}finally{try{r||null==u.return||u.return()}finally{if(l)throw i}}return a.sort(function(e,t){return t.score-e.score})}(a,t,n)}var p=function(){function e(t,n){Object(s.a)(this,e),this._defaultMu=t,this._defaultSigma=n,this._ratings=void 0,this._ratings=new Map}return Object(u.a)(e,[{key:"accumulateRatings",value:function(e){var t=!0,n=!1,a=void 0;try{for(var r,l=this._ratings.entries()[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var i=r.value,s=Object(o.a)(i,2),u=s[0],c=s[1],h=e.get(u),d={mu:c.mu,sigma2:c.sigma*c.sigma};h&&(d.mu+=h.mu,d.sigma2+=h.sigma2),e.set(u,d)}}catch(v){n=!0,a=v}finally{try{t||null==l.return||l.return()}finally{if(n)throw a}}}},{key:"addEntry",value:function(e,t,n){var a=new d.a(t||this._defaultMu,n||this._defaultSigma);return this._ratings.set(e,a),a}},{key:"update",value:function(e){var t=this._rankingToRatingGroups(e),n=Object(v.a)(t);this._updateRatings(e,n)}},{key:"_rankingToRatingGroups",value:function(e){var t=[],n=!0,a=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var o=l.value,s=[],u=!0,c=!1,h=void 0;try{for(var d,v=o[Symbol.iterator]();!(u=(d=v.next()).done);u=!0){var m=d.value,f=this._ratings.get(m);f||(f=this.addEntry(m)),s.push(f)}}catch(g){c=!0,h=g}finally{try{u||null==v.return||v.return()}finally{if(c)throw h}}t.push(s)}}catch(g){a=!0,r=g}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return t}},{key:"_updateRatings",value:function(e,t){var n=!0,a=!1,r=void 0;try{for(var l,i=f(e,t)[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var s=l.value,u=Object(o.a)(s,2),c=u[0],h=u[1],d=!0,v=!1,m=void 0;try{for(var g,y=f(c,h)[Symbol.iterator]();!(d=(g=y.next()).done);d=!0){var p=g.value,b=Object(o.a)(p,2),w=b[0],E=b[1];this._ratings.set(w,E)}}catch(k){v=!0,m=k}finally{try{d||null==y.return||y.return()}finally{if(v)throw m}}}}catch(k){a=!0,r=k}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}}]),e}(),b=function(){var e=Object(a.useState)((-3).toString()),t=Object(o.a)(e,2),n=t[0],l=t[1],i=Object(a.useState)(100..toString()),s=Object(o.a)(i,2),u=s[0],c=s[1],h=Object(a.useState)("Asiago Brie\nCheddar\n\nBrie Cheddar\nAsiago\n\nAsiago\nBrie\n\nCheddar\nAsiago\nDanishBlue\n\nBrie\nAsiago\nCheddar\n\nBrie\nDanishBlue\nAsiago\nCheddar\n\n"),d=Object(o.a)(h,2),v=d[0],m=d[1],f=Object(a.useState)(null),g=Object(o.a)(f,2),p=g[0],b=g[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Provide rankings, get scores!"),r.a.createElement("div",null,"\xa0"),r.a.createElement("div",null,"This page demonstrates using ",r.a.createElement("a",{href:"https://trueskill.org/"},"TrueSkill")," to construct a voting system where not every voter has to evaluate every entry. Each voter instead ranks every entry they have an opinion about. We can get scores (and therefore a consensus ranking) from these inputs by treating each voter's ranking as the result of a free-for-all match between all the entries they ranked, and use TrueSkill to update entry ratings based on the results of each match."),r.a.createElement("div",null,r.a.createElement("h3",null,"Instructions")),r.a.createElement("div",null,r.a.createElement("b",null,"Votes:")," each block of lines below is an individual voter's ranking. Entries that come first are ranked higher, entries appearing on the same line are ties. For example: in the default rankings in the box below, the first user has ranked Asiago and Brie tied for first, with Cheddar coming in second. The second user ranked Brie and Cheddar first, and Asiago second."),r.a.createElement("div",null,r.a.createElement("b",null,"Optimism")," controls how much we credit (positive values) or penalize (negative values) entries with uncertain scores: controversial entries, or entries without many votes. Best to keep this zero or negative. (Details: controls how many standard deviations we should add/subtract from the mean of each entry's rating distribution to arrive at a final score.)"),r.a.createElement("div",null,r.a.createElement("b",null,"Samples"),' trades off computation time versus the stability of the final result. Use a low value for quick approximate answers, a higher value for more repeatable ones. (Details: the order in which we run "matches" affects the final result. This samples multiple orders and averages the results.)'),r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"50% 50%"}},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",null,"Inputs")),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){var t=function(e){var t=[];e=(e=(e=(e=e.trim()).replace("\r\n","\n")).replace(/\n[ \t\n]+\n/g,"\n\n")).replace(/[ \t]+/g," "),console.log("cleaned\n",e);var n=e.split("\n\n"),a=!0,r=!1,l=void 0;try{for(var i,o=n[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value,u=[],c=!0,h=!1,d=void 0;try{for(var v,m=s.split("\n")[Symbol.iterator]();!(c=(v=m.next()).done);c=!0){var f=v.value;f=f.trim(),console.log("group",f);var g=f.split(" ");if(0===g.length)throw new Error("0 length rank group found");u.push(g)}}catch(y){h=!0,d=y}finally{try{c||null==m.return||m.return()}finally{if(h)throw d}}u.length>1?t.push(u):console.warn("Ignoring too-short ranking:",u)}}catch(y){r=!0,l=y}finally{try{a||null==o.return||o.return()}finally{if(r)throw l}}return t}(v);console.log("---"),console.log(t),console.log("---");var a=y(t,parseInt(n,10),parseInt(u,10));b(a.map(function(e,t){return"".concat(t+1,"\t").concat(e.score,"\t").concat(e.id)}).join("\n")),console.log(p),e.preventDefault()}},r.a.createElement("div",null,r.a.createElement("label",null,"Optimism (-3 to -2 seems ideal):"),r.a.createElement("input",{type:"text",id:"optimism",name:"optimism",value:n,onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("label",null,"Samples (1 to 10000):"),r.a.createElement("input",{type:"number",id:"epochs",name:"epochs",min:"1",max:"10000",value:u,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("label",null,"Votes:")),r.a.createElement("div",null,r.a.createElement("textarea",{id:"votes",name:"votes",rows:30,cols:60,value:v,onChange:function(e){return m(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("input",{type:"submit"}))))),r.a.createElement("div",null,r.a.createElement("h3",null,"Results"),p&&r.a.createElement("pre",null,p))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[178,1,2]]]);
//# sourceMappingURL=main.a37724ef.chunk.js.map